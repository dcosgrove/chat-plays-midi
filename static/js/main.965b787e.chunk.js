(this["webpackJsonpchat-plays-midi"]=this["webpackJsonpchat-plays-midi"]||[]).push([[0],{138:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(25),i=n.n(a),s=(n(138),n(50),n(51),n(5)),o=n(1),j="xsdpos4tnftz6tirr730o0c3u5lfsj",l=Object(c.createContext)({token:"",clientId:j,updateToken:function(){}}),u=function(e){var t=e.children,n=Object(c.useState)({token:"",expiresAt:""}),r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(o.jsx)(l.Provider,{value:{token:a.token,clientId:j,updateToken:function(e,t){i({token:e,expiresAt:t})}},children:t})},d=n(9);var b=function(){var e=Object(c.useContext)(l).updateToken,t=document.location.hash.split("&")[0].replace("#access_token=","");return Object(c.useEffect)((function(){var n=Date.now();e(t,n)})),Object(o.jsx)("div",{children:""!==t?Object(o.jsx)(d.a,{replace:!0,to:"/"}):"Authorizing..."})},f=n(14),O=n(52),h=n(126);var v=function(e,t,n){var r=Object(c.useState)(null),a=Object(s.a)(r,2),i=a[0],o=a[1],j=Object(c.useState)("disconnected"),l=Object(s.a)(j,2),u=l[0],d=l[1];return Object(c.useEffect)((function(){if(!i&&""!==t){console.log("setting up Twitch pubsub client...");var c=new O.StaticAuthProvider(e,t),r=new h.SingleUserPubSubClient({authProvider:c});d("connecting"),r.onRedemption((function(e){var t=e.id,c=e.userDisplayName,r=e.rewardTitle,a=e.redemptionDate;n({id:t,userDisplayName:c,rewardTitle:r,redemptionDate:a})}),(function(e){throw e})),o(r),function(e,t){setInterval((function(){var n=e._pubSubClient,c=n.isConnected,r=n.isConnecting;t((function(){return c?"connected":r?"connecting":"disconnected"}))}),1e3)}(r,d)}}),[i,e,n,t]),u},x=Object(c.createContext)({events:[],registerEventListeners:function(e){},unregisterEventListener:function(e){},setEventListeners:function(){},eventListeners:[],connectionStatus:"disconnected"}),m=function(e){var t=e.children,n=Object(c.useState)([]),r=Object(s.a)(n,2),a=r[0],i=r[1],j=Object(c.useContext)(l),u=j.clientId,d=j.token,b=Object(c.useState)([]),O=Object(s.a)(b,2),h=O[0],m=O[1];Object(c.useEffect)((function(){if(a.length>0){var e=a[a.length-1].rewardTitle;h.forEach((function(t){var n=t.condition,c=t.effects;"channelPoint"===n.type&&n.name===e&&c.forEach((function(e){(0,e.exec)()}))}))}}),[a]);var p=v(u,d,(function(e){var t=e.userDisplayName,n=e.rewardTitle,c=e.redemptionDate;i((function(e){return[].concat(Object(f.a)(e),[{userDisplayName:t,rewardTitle:n,redemptionDate:c}])}))}));return Object(o.jsx)(x.Provider,{value:{events:a,registerEventListeners:function(e){m((function(t){return[].concat(Object(f.a)(t),Object(f.a)(e))}))},unregisterEventListener:function(e){m((function(t){return t.filter((function(t){return t.id!==e}))}))},setEventListeners:m,eventListeners:h,connectionStatus:p},children:t})},p=n(228),g=n(235),C=n(223),y=n(224),D=n(127),T=n(225),S=n(226),I={"neural-henson":"Neural DSP Archetype: Tim Henson","quad-cortex":"Neural DSP Quad Cortex",generic:"Generic MIDI Device"},P=n(92),E=n.n(P);var N=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){E.a.enable((function(e){e?(console.error("Unable to enable WebMIDI",e),r([])):r(E.a.outputs)}))}),[]),n},w=Object(c.createContext)({devices:[],setDevices:function(){},midiOutputs:[]}),k=function(e){var t=e.children,n=N(),r=Object(c.useState)([]),a=Object(s.a)(r,2),i=a[0],j=a[1];return Object(o.jsx)(w.Provider,{value:{devices:i,setDevices:j,midiOutputs:n},children:t})};var L=function(){var e=Object(c.useContext)(w),t=e.devices,n=e.setDevices;return Object(o.jsx)(C.a,{fluid:!0,children:Object(o.jsx)(y.a,{children:Object(o.jsxs)(D.a,{children:[Object(o.jsxs)(T.a,{striped:!0,bordered:!0,variant:"light",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Alias"}),Object(o.jsx)("th",{children:"ID"}),Object(o.jsx)("th",{children:"Type"}),Object(o.jsx)("th",{})]})}),Object(o.jsx)("tbody",{children:t.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.alias}),Object(o.jsx)("td",{children:e.id}),Object(o.jsx)("td",{children:I[e.type]}),Object(o.jsx)("td",{children:Object(o.jsx)(S.a,{variant:"danger",onClick:function(){var c;c=e.id,n(t.filter((function(e){return e.id!==c})))},children:"Remove"})})]},e.key)}))})]}),0===t.length?Object(o.jsx)("h2",{children:"Add a new MIDI device to get started!"}):null]})})})},A=n(2),q=n(233),M=n(128),F=n(227),R=[["Toggle Overdrive",1,"control"],["Toggle Distortion",3,"control"],["Toggle Phaser",4,"control"],["Toggle Chorus",5,"control"],["Toggle Reverb",7,"control"],["Toggle Delay",8,"control"],["Change Patch: Clean Delay",0,"program"],["Change Patch: Lead Shred",1,"program"]],J=function(e,t){return function(n){if("builtin"===n.effectType)return function(e,t){return function(n){var c=n.cc,r=n.midiType;return function(){switch(r){case"control":return e.sendControlChange(c,1,t);case"program":return e.sendProgramChange(c,t);default:return}}}}(e,t)(n)}},z=function(e,t){return R.reduce((function(n,c){var r=Object(s.a)(c,3),a=r[0],i={effectType:"builtin",name:a,cc:r[1],midiType:r[2]};return n[a]={params:i,exec:J(e,t)(i)},n}),{})},V=[["Delay On",27,1,"control"],["Delay Off",27,0,"control"]],K=function(e,t){return function(n){if("builtin"===n.effectType)return function(e,t){return function(n){var c=n.cc,r=n.value,a=n.midiType;return function(){switch(a){case"control":return e.sendControlChange(c,r,t);case"program":return e.sendProgramChange(c,t);default:return}}}}(e,t)(n.setlistNumber,n.presetNumber)}},U=function(e,t){return V.reduce((function(n,c){var r=Object(s.a)(c,4),a=r[0],i={effectType:"builtin",name:a,cc:r[1],value:r[2],midiType:r[3]};return n[a]={params:i,exec:K(e,t)(i)},n}),{})},_=[],B=function(e,t){return _.reduce((function(n,c){var r=Object(s.a)(c,3),a=r[0],i=r[1],o=r[2];return n[a]=function(){"control"===o?e.sendControlChange(i,1,t):"program"===o&&e.sendProgramChange(i,t)},n}),{})},G={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7},Q=["Change Preset","Change Scene"],H=function(e,t){return function(n){switch(n.effectType){case"Change Preset":return function(e,t){return function(n,c){return function(){console.log("[Debug] QC MIDI preset change: Setlist",n,"Preset",c),c<128?e.sendControlChange(0,0,t):e.sendControlChange(0,1,t),e.sendControlChange(32,n,t),e.sendProgramChange(c%128,t)}}}(e,t)(n.setlistNumber,n.presetNumber);case"Change Scene":return function(e,t){return function(n){return function(){e.sendControlChange(43,G[n],t),console.log("[Debug] QC Changing scene to: ",n)}}}(e,t)(n.scene);default:return}}},W=function(e,t){return function(n){switch(n.effectType){case"Control Change":return function(e,t){return function(n){return function(){e.sendControlChange(n,1,t)}}}(e,t)(n.midiCc);case"Program Change":return function(e,t){return function(n){return function(){e.sendProgramChange(n,t)}}}(e,t)(n.midiPc);default:return}}},X=function(e,t,n,c){return c.map((function(c){return"quad-cortex"===n?Object(A.a)(Object(A.a)({},c),{},{exec:H(e,t)(c.params)}):"neural-henson"===n||"generic"===n?Object(A.a)(Object(A.a)({},c),{},{exec:W(e,t)(c.params)}):Object(A.a)(Object(A.a)({},c),{},{exec:function(){console.log("Error: device not supported")}})})).reduce((function(e,t){return e[t.name]={params:t.params,exec:t.exec},e}),{})},Y=function(e,t){return Object(A.a)(Object(A.a)({},e),{},{effects:X(e.output,e.channel,e.type,t)})},Z=function(e){return Object(A.a)(Object(A.a)({},e),{},{effects:(t=e.output,n=e.channel,c=e.type,"kemper"===c?U(t,n):"neural-henson"===c||"neural-gojira"===c?z(t,n):"quad-cortex"===c?B(t,n):[])});var t,n,c};var $=function(){var e={alias:"My Example Device",type:"",midiDevice:"",midiChannel:""},t=Object(c.useState)(e),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),j=Object(s.a)(i,2),l=j[0],u=j[1],d=Object(c.useState)(!1),b=Object(s.a)(d,2),O=b[0],h=b[1],v=Object(c.useContext)(w),x=v.devices,m=v.setDevices,p=v.midiOutputs;return Object(o.jsx)(C.a,{children:Object(o.jsx)(y.a,{children:Object(o.jsxs)(q.a,{noValidate:!0,validated:l,onSubmit:function(t){var n;t.preventDefault(),t.stopPropagation(),t.currentTarget.checkValidity()?(n={key:[r.midiDevice,"-",r.midiChannel].join(""),id:[r.midiDevice,"-",r.midiChannel].join(""),alias:r.alias,channel:r.midiChannel,type:r.type,output:p.find((function(e){return e.id===r.midiDevice}))},!x.some((function(e){return e.alias===n.alias}))&&(m([].concat(Object(f.a)(x),[Z(n)])),1)?(u(!1),a(e),h(!1)):h(!0)):u(!0)},children:[Object(o.jsx)(y.a,{children:Object(o.jsxs)(q.a.Group,{className:"mb-3",controlId:"formDeviceAlias",children:[Object(o.jsx)(q.a.Label,{children:"Device Name"}),Object(o.jsx)(q.a.Control,{required:!0,value:r.alias,onChange:function(e){a(Object(A.a)(Object(A.a)({},r),{},{alias:e.target.value}))},type:"text"}),Object(o.jsx)(q.a.Control.Feedback,{type:"invalid",children:"Please choose a name for your device"}),Object(o.jsx)(q.a.Text,{className:"text-muted",children:"Enter a name for the MIDI device you want to control"})]})}),Object(o.jsxs)(y.a,{className:"mb-3",children:[Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formDeviceType",label:"Device Type",children:Object(o.jsxs)(q.a.Select,{required:!0,value:r.type,onChange:function(e){a(Object(A.a)(Object(A.a)({},r),{},{type:e.target.value}))},"aria-label":"Device Type",children:[Object(o.jsx)("option",{value:""}),Object.entries(I).map((function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(o.jsx)("option",{value:n,children:c},n)}))]})})}),Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formMidiDevice",label:"MIDI Device",children:Object(o.jsxs)(q.a.Select,{required:!0,value:r.midiDevice,onChange:function(e){a(Object(A.a)(Object(A.a)({},r),{},{midiDevice:e.target.value}))},"aria-label":"MIDI Device",children:[Object(o.jsx)("option",{value:""}),p.map((function(e){return Object(o.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id)}))]})})}),Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formChannel",label:"MIDI Channel",children:Object(o.jsxs)(q.a.Select,{required:!0,value:r.midiChannel,onChange:function(e){a(Object(A.a)(Object(A.a)({},r),{},{midiChannel:e.target.value}))},"aria-label":"MIDI Channel",children:[Object(o.jsx)("option",{value:""}),Object(f.a)(Array(16)).map((function(e,t){return Object(o.jsx)("option",{value:t+1,children:t+1},t)}))]})})})]}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)(D.a,{children:O?Object(o.jsx)(F.a,{variant:"info",children:"Device name must be unique! Choose another and try again"}):null}),Object(o.jsx)(D.a,{children:Object(o.jsx)(S.a,{type:"submit",variant:"primary",children:"Add Device"})})]})]})})})},ee=n(3),te=n(133);var ne=function(){var e=Object(c.useContext)(w),t=e.devices,n=e.setDevices,r=Object(c.useContext)(x),a=r.eventListeners,i=r.unregisterEventListener,j=t.reduce((function(e,t){var n=Object.entries(t.effects).map((function(e){var n=Object(s.a)(e,2),c=n[0],r=n[1].exec;return{key:"".concat(t.key,"-").concat(c),deviceAlias:t.alias,name:c,exec:r}}));return[].concat(Object(f.a)(e),Object(f.a)(n))}),[]);return Object(o.jsx)(C.a,{fluid:!0,children:Object(o.jsx)(y.a,{children:Object(o.jsx)(D.a,{children:Object(o.jsxs)(T.a,{striped:!0,bordered:!0,variant:"light",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Device"}),Object(o.jsx)("th",{children:"Effect"}),Object(o.jsx)("th",{children:"Test"}),Object(o.jsx)("th",{children:"Remove"})]})}),Object(o.jsx)("tbody",{children:j.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.deviceAlias}),Object(o.jsx)("td",{children:e.name}),Object(o.jsx)("td",{children:Object(o.jsx)(S.a,{onClick:function(){e.exec()},children:"Trigger"})}),Object(o.jsx)("td",{children:Object(o.jsx)(S.a,{variant:"danger",onClick:function(){!function(e,t){n((function(n){var c=n.findIndex((function(e){return e.alias===t})),r=n[c].effects,a=(r[e],Object(ee.a)(r,[e].map(te.a)));return n[c].effects=a,Object(f.a)(n)})),a.filter((function(n){return n.device.alias===t&&n.effects.some((function(t){return t.name===e}))})).forEach((function(e){return i(e.id)}))}(e.name,e.deviceAlias)},children:"Remove"})})]},e.key)}))})]})})})})};var ce=function(){var e=Object(c.useContext)(x).events.map((function(e){var t=e.userDisplayName,n=e.rewardTitle,c=e.redemptionDate;return"[".concat(c,"] Username: ").concat(t," | Channel Point Redemption: ").concat(n)})).join("\n");return Object(o.jsx)(C.a,{children:Object(o.jsx)(M.a,{controlId:"logsTextArea",label:"Twitch Event Log",children:Object(o.jsx)(q.a.Control,{as:"textarea",readOnly:!0,value:e,style:{height:"400px"}})})})},re=function(e){var t=e.type,n=e.name;return"channelPoint"===t?"[Channel Points] ".concat(n):"Error"};var ae=function(){var e=Object(c.useContext)(x),t=e.eventListeners,n=e.unregisterEventListener;return Object(o.jsx)(C.a,{fluid:!0,children:Object(o.jsx)(y.a,{children:Object(o.jsx)(D.a,{children:Object(o.jsxs)(T.a,{striped:!0,bordered:!0,variant:"light",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Twitch Event"}),Object(o.jsx)("th",{children:"Device"}),Object(o.jsx)("th",{children:"Effects"}),Object(o.jsx)("th",{})]})}),Object(o.jsx)("tbody",{children:t.map((function(e){var t=e.id,c=e.condition,r=e.device,a=e.effects;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:re(c)}),Object(o.jsx)("td",{children:r.alias}),Object(o.jsx)("td",{children:a.reduce((function(e,t){return e+" -> "+t.name}),"")}),Object(o.jsx)("td",{children:Object(o.jsx)(S.a,{variant:"danger",onClick:function(){n(t)},children:"Remove"})})]},t)}))})]})})})})},ie=n(131);var se=function(){var e=Object(c.useState)({device:{effects:[]},condition:{type:"",name:""},effects:[]}),t=Object(s.a)(e,2),n=t[0],r=n.device,a=n.condition,i=n.effects,j=t[1],l=Object(c.useContext)(w).devices,u=Object(c.useContext)(x).registerEventListeners;return Object(o.jsx)(C.a,{children:Object(o.jsx)(y.a,{children:Object(o.jsxs)(q.a,{children:[Object(o.jsxs)(y.a,{className:"mb-3",children:[Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formTwitchEvent",label:"Twitch Event Type",children:Object(o.jsxs)(q.a.Select,{value:a.type,onChange:function(e){j((function(t){return Object(A.a)(Object(A.a)({},t),{},{condition:{name:t.condition.name,type:e.target.value}})}))},"aria-label":"Device Type",children:[Object(o.jsx)("option",{value:""}),Object(o.jsx)("option",{value:"channelPoint",children:"Channel Points"})]})})}),Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"floatingInputGrid",label:"Twitch Event: Value",children:Object(o.jsx)(q.a.Control,{type:"text",value:a.name,onChange:function(e){j((function(t){return Object(A.a)(Object(A.a)({},t),{},{condition:{type:t.condition.type,name:e.target.value}})}))},placeholder:""})})}),Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formDevice",label:"Device",children:Object(o.jsxs)(q.a.Select,{value:r.id,onChange:function(e){j((function(t){return Object(A.a)(Object(A.a)({},t),{},{device:l.find((function(t){return t.id===e.target.value}))||{effects:[]}})}))},"aria-label":"Device",children:[Object(o.jsx)("option",{value:""}),l.map((function(e){var t=e.alias,n=e.key,c=e.id;return Object(o.jsx)("option",{value:c,children:t},n)}))]})})})]}),Object(o.jsx)(y.a,{className:"mb-3",children:Object(o.jsx)(D.a,{className:"mr-5 ml-5",md:!0,children:Object(o.jsx)(ie.a,{options:Object.keys(r.effects).map((function(e){return{value:e,label:e}})),value:i.map((function(e){return{label:e,value:e}})),placeholder:"Select Effects",onChange:function(e){j((function(t){return Object(A.a)(Object(A.a)({},t),{},{effects:e.map((function(e){return e.value}))})}))},isMulti:!0})})}),Object(o.jsx)(y.a,{children:Object(o.jsx)(D.a,{children:Object(o.jsx)(S.a,{onClick:function(){!function(e){var t={id:"".concat(e.device.alias,"-").concat(e.condition.type,"-").concat(e.condition.name),device:e.device,condition:e.condition,effects:e.effects.map((function(t){return{name:t,exec:e.device.effects[t].exec}}))};u([t])}({device:r,condition:a,effects:i})},variant:"primary",children:"Add Trigger"})})})]})})})},oe=["effectType"],je=function(e){var t=JSON.parse(localStorage.getItem("".concat(e,"-triggers"))),n=JSON.parse(localStorage.getItem("".concat(e,"-devices"))),c=JSON.parse(localStorage.getItem("".concat(e,"-effects")));return t&&n&&c?{triggers:t,devices:n,effects:c}:null};var le=function(){var e=Object(c.useContext)(x),t=e.eventListeners,n=e.setEventListeners,r=Object(c.useContext)(w),a=r.devices,i=r.setDevices,j=r.midiOutputs,l=Object(c.useState)([]),u=Object(s.a)(l,2),d=(u[0],u[1]),b=function(e){var t=e.triggers,c=void 0===t?[]:t,r=e.devices,a=void 0===r?[]:r,s=e.effects,o=void 0===s?[]:s,l=a.reduce((function(e,t){var n=e.devices,c=e.errors,r=j.find((function(e){return e.id===t.midiOutput}));if(r){var a=Object(A.a)(Object(A.a)({},t),{},{key:t.id,output:r}),i=function(e){return e.map((function(e){var t=Object(A.a)({effectType:e.effectType},Object.fromEntries(e.params));return{name:e.name,params:t}}))}(o.filter((function(e){return e.alias===t.alias})));return{devices:[].concat(Object(f.a)(n),[Y(a,i)]),errors:c}}return{devices:n,errors:[].concat(Object(f.a)(c),[new Error("Error loading configuration for device ".concat(t.alias," - ID ").concat(t.midiOutput," not found"))])}}),{devices:[],errors:[]});d(l.errors),i(l.devices);var u=c.reduce((function(e,t){var n=l.devices.find((function(e){return e.id===t.device}));if(n){var c=Object(A.a)(Object(A.a)({},t),{},{device:n,effects:t.effects.map((function(e){return{name:e,exec:n.effects[e].exec}}))});return[].concat(Object(f.a)(e),[c])}return e}),[]);return n(u),l.errors},O=Object(c.useState)(!0),h=Object(s.a)(O,2),v=h[0],m=h[1];return Object(c.useEffect)((function(){if(v){var e=je("current");if(e)0===b(e).length&&m(!1);else m(!1)}}),[j,v,m,b]),Object(o.jsxs)(C.a,{children:[Object(o.jsx)(y.a,{className:"mb-2",children:Object(o.jsx)(D.a,{children:Object(o.jsx)(S.a,{variant:"primary",onClick:function(){!function(e,t){var n=t.triggers,c=t.devices,r=t.effects;localStorage.setItem("".concat(e,"-triggers"),JSON.stringify(n)),localStorage.setItem("".concat(e,"-devices"),JSON.stringify(c)),localStorage.setItem("".concat(e,"-effects"),JSON.stringify(r))}("current",{triggers:t.map((function(e){return{id:e.id,condition:e.condition,device:e.device.id,effects:e.effects.map((function(e){return e.name}))}})),devices:a.map((function(e){return{id:e.id,alias:e.alias,channel:e.channel,type:e.type,midiOutput:e.output.id}})),effects:a.reduce((function(e,t){var n={alias:t.alias,deviceType:t.type},c=Object.entries(t.effects).map((function(e){var t=Object(s.a)(e,2),c=t[0],r=t[1].params,a=r.effectType,i=Object(ee.a)(r,oe),o=Object.entries(i);return Object(A.a)(Object(A.a)({},n),{},{name:c,effectType:a,params:o})}));return[].concat(Object(f.a)(e),Object(f.a)(c))}),[])})},children:"Save Current Configuration"})})}),Object(o.jsx)(y.a,{children:Object(o.jsx)(D.a,{children:Object(o.jsx)(S.a,{variant:"primary",onClick:function(){var e=je("current");e&&b(e)},children:"Restore Last Saved Configuration"})})})]})};function ue(e){var t=e.setEffectParams,n=e.effectParams,c=n.effectType,r=void 0===c?"":c,a=n.midiCc,i=void 0===a?"":a,s=n.midiPc,j=void 0===s?"":s;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(y.a,{className:"mb-3",children:[Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formMidiEffectType",label:"Effect Type",children:Object(o.jsxs)(q.a.Select,{required:!0,value:r,onChange:function(e){e.target.value!==r&&t({effectType:e.target.value})},"aria-label":"Effect Type",children:[Object(o.jsx)("option",{value:""}),Object(o.jsx)("option",{value:"Control Change",children:"Control Change"},"Control Change"),Object(o.jsx)("option",{value:"Program Change",children:"Program Change"},"Program Change")]})})}),"Control Change"===r?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a,{xs:!0,children:Object(o.jsx)(M.a,{controlId:"floatingCcNumber",label:"CC #",children:Object(o.jsx)(q.a.Control,{required:!0,type:"text",value:i,onChange:function(e){t(Object(A.a)(Object(A.a)({},n),{},{midiCc:e.target.value}))}})})}),Object(o.jsx)(D.a,{xs:!0})]}):"Program Change"===r?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a,{xs:!0,children:Object(o.jsx)(M.a,{controlId:"floatingPcNumber",label:"PC #",children:Object(o.jsx)(q.a.Control,{required:!0,type:"text",value:j,onChange:function(e){t(Object(A.a)(Object(A.a)({},n),{},{midiPc:e.target.value}))}})})}),Object(o.jsx)(D.a,{xs:!0})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a,{xs:!0}),Object(o.jsx)(D.a,{xs:!0})]})]})})}function de(e){var t=e.setEffectParams,n=e.effectParams,c=n.effectType,r=void 0===c?"":c,a=n.presetNumber,i=void 0===a?"":a,s=n.setlistNumber,j=void 0===s?"":s,l=n.scene,u=void 0===l?"":l;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(y.a,{className:"mb-3",children:[Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formQCEffectType",label:"Effect Type",children:Object(o.jsxs)(q.a.Select,{required:!0,value:r,onChange:function(e){e.target.value!==r&&t({effectType:e.target.value})},"aria-label":"Effect Type",children:[Object(o.jsx)("option",{value:""}),Q.map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))]})})}),"Change Preset"===r?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a,{xs:!0,children:Object(o.jsx)(M.a,{controlId:"floatingSetlistNumber",label:"Setlist #",children:Object(o.jsx)(q.a.Control,{required:!0,type:"text",value:j,onChange:function(e){t(Object(A.a)(Object(A.a)({},n),{},{setlistNumber:e.target.value}))}})})}),Object(o.jsx)(D.a,{xs:!0,children:Object(o.jsx)(M.a,{controlId:"floatingPresetNumber",label:"Preset #",children:Object(o.jsx)(q.a.Control,{required:!0,type:"text",value:i,onChange:function(e){t(Object(A.a)(Object(A.a)({},n),{},{presetNumber:e.target.value}))}})})})]}):"Change Scene"===r?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a,{xs:!0,children:Object(o.jsx)(M.a,{controlId:"floatingSceneLetter",label:"Scene",children:Object(o.jsxs)(q.a.Select,{required:!0,value:u,onChange:function(e){t(Object(A.a)(Object(A.a)({},n),{},{scene:e.target.value}))},"aria-label":"Scene",children:[Object(o.jsx)("option",{value:""}),Object.keys(G).map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))]})})}),Object(o.jsx)(D.a,{xs:!0})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a,{xs:!0}),Object(o.jsx)(D.a,{xs:!0})]})]})})}var be=function(){var e={device:{id:"",effects:[]},effectName:"",setlistNumber:"",presetNumber:""},t=Object(c.useState)(e),n=Object(s.a)(t,2),r=n[0],a=r.device,i=r.effectName,j=r.effectParams,l=void 0===j?{}:j,u=n[1],d=Object(c.useState)(!1),b=Object(s.a)(d,2),O=b[0],h=b[1],v=Object(c.useState)(!1),x=Object(s.a)(v,2),m=x[0],p=x[1],g=Object(c.useContext)(w),T=g.devices,I=g.setDevices,P=function(){var t=T.filter((function(e){return e.id!==a.id}));if(a.effects[i])p(!0);else{var n=a.effects;"quad-cortex"===a.type?n[i]={params:l,exec:H(a.output,a.channel)(l)}:"neural-henson"!==a.type&&"generic"!==a.type||(n[i]={params:l,exec:W(a.output,a.channel)(l)}),I([].concat(Object(f.a)(t),[Object(A.a)(Object(A.a)({},a),{},{effects:n})])),h(!1),p(!1),u(e)}};return Object(o.jsx)(C.a,{children:Object(o.jsx)(y.a,{children:Object(o.jsxs)(q.a,{noValidate:!0,validated:O,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.checkValidity()?P():h(!0)},children:[Object(o.jsxs)(y.a,{className:"mb-3",children:[Object(o.jsx)(D.a,{xs:6,children:Object(o.jsx)(M.a,{controlId:"floatingEffectName",label:"Effect Name",children:Object(o.jsx)(q.a.Control,{type:"text",required:!0,value:i,onChange:function(e){u((function(t){return Object(A.a)(Object(A.a)({},t),{},{effectName:e.target.value})}))}})})}),Object(o.jsx)(D.a,{md:!0,children:Object(o.jsx)(M.a,{controlId:"formDevice",label:"Device",children:Object(o.jsxs)(q.a.Select,{required:!0,value:a.id,onChange:function(e){u((function(t){return Object(A.a)(Object(A.a)({},t),{},{device:T.find((function(t){return t.id===e.target.value}))||{effects:[]}})}))},"aria-label":"Device",children:[Object(o.jsx)("option",{value:""}),T.map((function(e){var t=e.alias,n=e.key,c=e.id;return Object(o.jsx)("option",{value:c,children:t},n)}))]})})})]}),"quad-cortex"===a.type?Object(o.jsx)(de,{setEffectParams:function(e){u((function(t){return Object(A.a)(Object(A.a)({},t),{},{effectParams:e})}))},effectParams:l}):"neural-henson"===a.type||"generic"===a.type?Object(o.jsx)(ue,{setEffectParams:function(e){u((function(t){return Object(A.a)(Object(A.a)({},t),{},{effectParams:e})}))},effectParams:l}):null,Object(o.jsxs)(y.a,{children:[Object(o.jsx)(D.a,{children:m?Object(o.jsx)(F.a,{variant:"info",children:"Unable to add effect: name must be unique per device!"}):null}),Object(o.jsx)(D.a,{children:Object(o.jsx)(S.a,{type:"submit",variant:"primary",children:"Add Effect"})})]})]})})})};var fe=function(){return Object(o.jsx)(k,{children:Object(o.jsxs)(p.a,{defaultActiveKey:"browser",id:"browser",className:"mb-3",children:[Object(o.jsxs)(g.a,{eventKey:"triggers",title:"Triggers",children:[Object(o.jsx)(ae,{}),Object(o.jsx)(se,{})]}),Object(o.jsxs)(g.a,{eventKey:"previewEffects",title:"Effects",children:[Object(o.jsx)(ne,{}),Object(o.jsx)(be,{})]}),Object(o.jsxs)(g.a,{eventKey:"midiDevices",title:"Manage MIDI Devices",children:[Object(o.jsx)(L,{}),Object(o.jsx)($,{})]}),Object(o.jsx)(g.a,{eventKey:"saveConfiguration",title:"Save/Load Configuration",children:Object(o.jsx)(le,{})}),Object(o.jsx)(g.a,{eventKey:"eventLog",title:"Twitch Event Log",children:Object(o.jsx)(ce,{})})]})})},Oe=n(234),he=n(236);var ve=function(e){var t=Object(c.useContext)(l),n=t.clientId,r=""!==t.token,a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"authorize");return r?e.children:Object(o.jsx)(Oe.a,{className:"mt-3",children:Object(o.jsx)(Oe.a.Body,{children:Object(o.jsxs)(he.a,{direction:"horizontal",gap:2,children:[Object(o.jsx)("div",{children:"Connect your Twitch.TV account in order to get started:"}),Object(o.jsx)(S.a,{onClick:function(){window.location.href="https://id.twitch.tv/oauth2/authorize?client_id=".concat(n,"&redirect_uri=").concat(a,"&response_type=token&scope=bits%3Aread%20channel%3Aread%3Aredemptions%20channel%3Aread%3Asubscriptions")},children:"Twitch.TV Login"})]})})})};var xe=function(){return Object(o.jsx)("h2",{children:"Invalid URL - page not found"})},me=n(232),pe=n(132),ge=n(91),Ce=n(229),ye=n(231),De=n(230);var Te=function(){switch(Object(c.useContext)(x).connectionStatus){case"connected":return Object(o.jsxs)(F.a,{variant:"success",className:"mb-0",children:[" ",Object(o.jsx)(Ce.a,{color:"green"})," Connected to Twitch"]});case"connecting":return Object(o.jsxs)(F.a,{variant:"primary",className:"mb-0",children:[" ",Object(o.jsx)(De.a,{size:"sm",animation:"border"})," Connecting..."]});case"disconnected":return Object(o.jsxs)(F.a,{variant:"danger",className:"mb-0",children:[Object(o.jsx)(ye.a,{color:"red"})," Disconnected from Twitch!"]});default:return Object(o.jsx)(F.a,{variant:"warning",children:"Error checking connection status"})}};var Se=function(){return Object(o.jsx)(u,{children:Object(o.jsx)(m,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(me.a,{variant:"dark",bg:"dark",expand:"sm",className:"mb-3",children:Object(o.jsxs)(C.a,{children:[Object(o.jsx)(me.a.Brand,{children:"Chat Plays MIDI"}),Object(o.jsx)(pe.a,{className:"me-auto"}),Object(o.jsx)(pe.a.Item,{children:Object(o.jsx)(C.a,{children:Object(o.jsx)(Te,{})})})]})}),Object(o.jsx)(C.a,{children:Object(o.jsx)(ge.a,{basename:"/chat-plays-midi",children:Object(o.jsxs)(d.d,{children:[Object(o.jsx)(d.b,{path:"/",element:Object(o.jsx)(C.a,{children:Object(o.jsx)(ve,{children:Object(o.jsx)(fe,{})})})}),Object(o.jsx)(d.b,{path:"/authorize",element:Object(o.jsx)(b,{})}),Object(o.jsx)(d.b,{path:"/*",element:Object(o.jsx)(xe,{})})]})})})]})})})};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(Se,{})}),document.getElementById("root"))},50:function(e,t,n){}},[[219,1,2]]]);
//# sourceMappingURL=main.965b787e.chunk.js.map